# 使用指南
## 1 上手
訪問[百度](https://www.baidu.com/s?wd=%E4%B8%9C%E6%96%B9%E6%B0%B8%E9%A1%B5%E6%9C%BA&ie=utf-8&nojc=1)並往下滾動，下一頁將會自動拼接。

## 2 翻頁隔條
翻頁時分頁之間會出現隔條，隔條左邊的太極圖標為返回頁首按鈕，右邊的太極圖標為前往頁尾按鈕。中間的 Page 字樣為下一頁的鏈接。
### 2.1 無縫沉浸式體驗
在配置頁可隱藏翻頁隔條。透過隱藏分隔條與添加側邊欄，可實現沉浸式體驗。
### 2.2 自定義頁碼
如果當前站點對應規則存在pageNum項，則單擊隔條中的數字可彈出輸入框，輸入數字即可跳轉到對應頁。
### 2.3 暫停翻頁
點擊隔條即可暫停翻頁。

## 3 命令菜單
點擊 Tampermonkey 的圖標，將在“東方永頁機”下方看到三個選項。
### 3.1 打開配置頁
點擊可前往[配置頁](https://github.com/hoothin/UserScripts/tree/master/Pagetual)，個性配置與規則自定義都在這裡。
### 3.2 在此站禁用翻頁
假如你認為當前網頁不應該翻頁，點擊可在當前域名下的所有網頁禁用東方永頁機。
### 3.3 強制拼接
如果智能規則有誤，可點擊此項。腳本會開啟強制拼接模式，如果選擇“拼接整頁”，則下一頁所有內容都將拼接到頁尾。否則僅透過iframe加載動態內容並提取至當前頁面。
### 3.4 更新在線規則
點擊可在線更新你已經導入的規則項，永頁機默認會兩天自動更新一次在線規則。

## 4 個性設置
前往配置頁之後可進行個性設置，例如分隔條透明值、寫入歷史記錄、新標籤頁打開與雙擊是否隱藏分隔條等。

可以導入其他大佬編寫的規則鏈接，也可以在輸入框自定義規則。其中規則鏈接支持排序與熱更新。點擊鏈接前面的上下箭頭可進行排序，點擊更新時間可進行規則熱更新。
### 4.1 寫入歷史記錄
開啓此選項后每次翻頁后永頁機都會將下一頁的網址寫入歷史記錄，如此點進鏈接后返回上一頁時便會返回上次瀏覽到的頁碼處。
### 4.2 新標籤頁打開
開啓此選項后拼接進入當前頁面的所有鏈接將會在新標籤頁打開。
### 4.3 翻頁前預讀下一頁，加速瀏覽
開啓后閲讀當前頁面時永頁機會預先讀取下一頁中的所有圖片

## 5 自定義規則
### 5.1 可視化抓取
點擊自定義規則後當前頁面中會出現藍色選框跟隨鼠標，此時點擊對應元素即可抓取想要拼接的主體內容並轉換為對應代碼。
### 5.2 調整選擇器
選定主體元素之後，鼠標移至選擇器代碼之上可展開全部文字，點擊可切換至任意父節點。當手動在輸入框輸入選擇器之後，點擊`√`可即時檢查選擇器對應元素並且複制。
### 5.3 開始編輯
準備就緒後點擊鉛筆圖標即可跳轉至配置頁面開始編輯規則。
### 5.4 你的第一個自定義規則
例如
```JSON
  {
    "name":"beauty",                                // 規則名
    "url":"^https://www\\.beautyxxx\\.com/",        // 對應頁面網址的匹配正則
    "pageElement":"p>img"                           // 下一頁中你想要插入的元素
  }
```
其他項可按需添加，例如“下一頁按鈕的選擇器”、“抓取元素的方式”、“翻頁時間間隔”等等。
### 5.5 移動菜單窗口
拖拽菜單標題即可移動菜單窗口。
### 5.6 暫停可視化抓取
點擊菜單標題欄左側的太極圖標，即可暫停可視化抓取。
### 5.7 快捷編輯
點擊下方的🔽圖標可開啟快捷編輯功能，透過上方的選擇器輸入框驗證並複制選擇器後粘貼至相應屬性處，完成後點擊存盤圖標即可。